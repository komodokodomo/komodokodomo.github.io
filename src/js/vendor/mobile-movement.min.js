;var MobileMovement=function(){var e,t={alpha:0,beta:0,gamma:0,uninitialized:!0},a=function(t){var a={on:{}};e=this,t||(t={});for(var r in a)t[r]=t[r]||a[r];this.registeredMovements={},this.monitoredMovements={},window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",i,!1),this.registerMovement("ball and paddle hit",[{beta:[-(1/0),4.9999]},{beta:[5,1/0]}]),this.registerMovement("basketball shot",[{beta:[90,1/0]},{beta:[0,75]}]),this.registerMovement("fishing line cast",[{beta:[90,1/0]},{beta:[0,75]}]),this.registerMovement("swing bat",[{alpha:60}]),this.registerMovement("upside down golf swing",[{beta:[-30,1/0]},{beta:[-(1/0),-85]}]),this.registerMovement("upside down golf putt",[{beta:[-75,1/0]},{beta:[-(1/0),-85]}]),this.registerMovement("basketball dribble",[{beta:[5,1/0]},{beta:[-(1/0),0]}]),this.registerMovement("headbang",[{gamma:[-(1/0),-75]},{gamma:[-65,1/0]}]),this.registerMovement("drum hit",[{beta:[30,1/0]},{beta:[-(1/0),10]}]),this.registerMovement("guitar strum",[{beta:[10,1/0]},{beta:[-(1/0),5]}]),this.registerMovement("left turn landscape",[{beta:[-5,1/0]},{beta:[-(1/0),-5]}]),this.registerMovement("right turn landscape",[{beta:[-(1/0),5]},{beta:[5,1/0]}]),this.registerMovement("left turn portrait",[{alpha:70}]),this.registerMovement("right turn portrait",[{alpha:-70}]),this.registerMovement("look up portrait",[{beta:[-(1/0),70]},{beta:[100,1/0]}]),this.registerMovement("look down portrait",[{beta:[51,1/0]},{beta:[-(1/0),50]}]),this.registerMovement("hadouken",[{beta:[150,1/0]},{beta:[-(1/0),110]}]),this.registerMovement("shoryuken",[{beta:[-(1/0),-155]},{beta:[-110,1/0]}]),this.registerMovement("vertical page flip",[{beta:[40,1/0]},{beta:[-(1/0),20]}]),this.registerMovement("football pass",[{beta:[5,1/0]},{beta:[-(1/0),-10]}]),this.registerMovement("door open back",[{gamma:[0,1/0]},{gamma:[-(1/0),0]}]),this.registerMovement("situp",[{beta:[-(1/0),10]},{beta:[45,1/0]}]),this.registerMovement("pushup",[{beta:[-(1/0),25]},{beta:[60,1/0]}]),this.registerMovement("punch",[{beta:[40,1/0]},{beta:[-(1/0),10]}]),this.registerMovement("spoon lift",[{beta:[-(1/0),-20]},{beta:[-10,1/0]}]),this.registerMovement("door opening front",[{gamma:[-(1/0),0]},{gamma:[0,1/0]}]),this.registerMovement("stab",[{beta:[-60,1/0]},{beta:[-(1/0),-70]}]),this.registerMovement("page turn",[{gamma:[0,1/0]},{gamma:[-(1/0),0]}]),this.registerMovement("ball roll",[{beta:[-(1/0),-90]},{beta:[-75,1/0]}]),this.registerMovement("pitch",[{beta:[90,1/0]},{beta:[-(1/0),40]}]),this.registerMovement("softball pitch",[{beta:[-(1/0),-25]},{beta:[-10,1/0]}]),this.registerMovement("yoyo down",[{beta:[0,1/0]},{beta:[-(1/0),0]}]),this.registerMovement("yoyo up",[{beta:[-(1/0),0]},{beta:[0,1/0]}]),this.registerMovement("hammer",[{beta:[22,1/0]},{beta:[-(1/0),12]}]),this.registerMovement("frisbee",[{alpha:-60}]),this.registerMovement("frisbee left",[{alpha:60}]),this.registerMovement("hadouken facing user",[{beta:[-(1/0),7]},{beta:[65,1/0]}]),this.registerMovement("hammer sideways",[{beta:[35,1/0]},{beta:[-(1/0),20]}]),this.registerMovement("frisbee left",[{alpha:-60}]),this.registerMovement("left turn landscape",[{beta:[0,1/0]},{beta:[-(1/0),-25]}]),this.registerMovement("right turn landscape",[{beta:[-(1/0),0]},{beta:[25,1/0]}]),this.registerMovement("soda shake",[{alpha:-40},{alpha:40}]),this.registerMovement("drink",[{beta:[120,1/0]},{beta:[-(1/0),112]}]),this.registerMovement("hose turn",[{beta:[-(1/0),4.9999]},{beta:[5,1/0]}]),this.registerMovement("drink pour",[{beta:[0,1/0]},{beta:[-(1/0),0]}]),this.registerMovement("selfie",[{beta:[103,145]}],function(){},2e3),this.registerMovement("broom sweep",[{gamma:[-45,1/0]},{gamma:[-(1/0),-60]}]),this.registerMovement("drink from bottle",[{beta:[0,1/0]},{beta:[-(1/0),-40]}]),this.registerMovement("dig",[{beta:[30,1/0]},{beta:[-(1/0),10]}]),this.registerMovement("bid",[{beta:[140,1/0]},{beta:[-(1/0),115]}]),this.registerMovement("bid facing self",[{beta:[-(1/0),30]},{beta:[70,1/0]}]),this.registerMovement("smoke",[{alpha:[-(1/0),265]},{alpha:[270,1/0]}]),this.registerMovement("knife throw",[{gamma:[0,1/0]},{gamma:[-(1/0),0]}]),this.registerMovement("draw gun",[{beta:[-(1/0),-60]},{beta:[-15,1/0]}]),this.registerMovement("run",[{gamma:[20,1/0]},{gamma:[-(1/0),-20]},{gamma:[20,1/0]},{gamma:[-(1/0),-20]}]),this.registerMovement("write",[{gamma:[20,1/0]},{gamma:[-(1/0),-20]}]);for(var n in t.on)t.on(n,t.on[n]);return e};a.prototype.constructor=a,a.prototype.on=function(e,t){return this.monitoredMovements[e]=this.registeredMovements[e],this.monitoredMovements[e].callback=t||function(){},this},a.prototype.off=function(e){return delete this.monitoredMovements[e],registeredMovements[e].reset(),this},a.prototype.registerMovement=function(e,t,a,r){this.registeredMovements[e]={path:t,currentState:0,longestStretch:{alpha:0,beta:0,gamma:0,uninitialized:!0},watch:{},recoilTime:r||500,callback:a||function(){},reset:function(){this.currentState=0,this.longestStretch={alpha:0,beta:0,gamma:0,uninitialized:!0}}};for(var i=0;i<t.length;i++)for(var n in t[i])this.registeredMovements[e].watch[n]=!0;return this};var r=function(e,a,r,i){a>t.alpha?e.longestStretch.alpha>=0?e.longestStretch.alpha+=a-t.alpha:e.longestStretch.alpha=0:e.longestStretch.alpha<=0?e.longestStretch.alpha+=a-t.alpha:e.longestStretch.alpha=0,r>t.beta?e.longestStretch.beta>=0?e.longestStretch.beta+=r-t.beta:e.longestStretch.beta=0:e.longestStretch.beta<=0?e.longestStretch.beta+=r-t.beta:e.longestStretch.beta=0,i>t.gamma?e.longestStretch.gamma>=0?e.longestStretch.gamma+=i-t.gamma:e.longestStretch.gamma=0:e.longestStretch.gamma<=0?e.longestStretch.gamma+=i-t.gamma:e.longestStretch.gamma=0},i=function(a){var i,s,m,h=a.alpha||0,g=a.beta||0,b=a.gamma||0;t.uninitialized&&(t.alpha=h,t.beta=g,t.gamma=b,delete t.uninitialized),i=Math.abs(h-t.alpha),s=Math.abs(g-t.beta),m=Math.abs(b-t.gamma),h-t.alpha>300?t.alpha+=360:t.alpha-h>300&&(h+=360),g-t.beta>300?t.beta+=360:t.beta-g>300&&(g+=360),b-t.gamma>300?t.gamma+=360:t.gamma-b>300&&(b+=360);for(var l in e.monitoredMovements)r(e.monitoredMovements[l],h,g,b),n(a,l)&&o(e.monitoredMovements[l],l,a);t.alpha=h%360,t.beta=g%360,t.gamma=b%360},n=function(t,a){var r=(t.alpha,t.beta,t.gamma,e.monitoredMovements[a]),i=r.currentState,n=r.path[i];return i>=e.monitoredMovements[a].path.length?!1:s(t,a,"alpha",n)&&s(t,a,"beta",n)&&s(t,a,"gamma",n)?!0:!1},s=function(t,a,r,i){var n=e.monitoredMovements[a];if(!n.watch[r])return!0;if(Array.isArray(i[r])){if(i[r][0]<=t[r]&&t[r]<=i[r][1])return!0}else{if(i[r]>0&&n.longestStretch[r]>=i[r])return n.longestStretch[r]=0,!0;if(i[r]<0&&n.longestStretch[r]<=i[r])return n.longestStretch[r]=0,!0}return!1},o=function(t,a,r){t.currentState++,t.currentState===t.path.length&&(t.callback({movement:t,actionKey:a,event:r}),setTimeout(function(){e.monitoredMovements[a]&&(e.monitoredMovements[a].currentState=0)},e.monitoredMovements[a].recoilTime))};return a}();